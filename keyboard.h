else if(ev.type == ALLEGRO_EVENT_KEY_DOWN) {
	switch(ev.keyboard.keycode) {
	case ALLEGRO_KEY_A:
		key[KEY_A]=true;
		break;

	case ALLEGRO_KEY_B:
		key[KEY_B]=true;
		break;

	case ALLEGRO_KEY_C:
		key[KEY_C]=true;
		break;

	case ALLEGRO_KEY_D:
		key[KEY_D]=true;
		break;

	case ALLEGRO_KEY_E:
		key[KEY_E]=true;
		break;

	case ALLEGRO_KEY_F:
		key[KEY_F]=true;
		break;

	case ALLEGRO_KEY_G:
		key[KEY_G]=true;
		break;

	case ALLEGRO_KEY_H:
		key[KEY_H]=true;
		break;

	case ALLEGRO_KEY_I:
		key[KEY_I]=true;
		break;

	case ALLEGRO_KEY_J:
		key[KEY_J]=true;
		break;

	case ALLEGRO_KEY_K:
		key[KEY_K]=true;
		break;

	case ALLEGRO_KEY_L:
		key[KEY_L]=true;
		break;

	case ALLEGRO_KEY_M:
		key[KEY_M]=true;
		break;

	case ALLEGRO_KEY_N:
		key[KEY_N]=true;
		break;

	case ALLEGRO_KEY_O:
		key[KEY_O]=true;
		break;

	case ALLEGRO_KEY_P:
		key[KEY_P]=true;
		break;

	case ALLEGRO_KEY_Q:
		key[KEY_Q]=true;
		break;

	case ALLEGRO_KEY_R:
		key[KEY_R]=true;
		break;

	case ALLEGRO_KEY_S:
		key[KEY_S]=true;
		break;

	case ALLEGRO_KEY_T:
		key[KEY_T]=true;
		break;

	case ALLEGRO_KEY_U:
		key[KEY_U]=true;
		break;

	case ALLEGRO_KEY_V:
		key[KEY_V]=true;
		break;

	case ALLEGRO_KEY_W:
		key[KEY_W]=true;
		break;

	case ALLEGRO_KEY_X:
		key[KEY_X]=true;
		break;

	case ALLEGRO_KEY_Y:
		key[KEY_Y]=true;
		break;

	case ALLEGRO_KEY_Z:
		key[KEY_Z]=true;
		break;

	case ALLEGRO_KEY_0:
		key[KEY_0]=true;
		break;

	case ALLEGRO_KEY_1:
		key[KEY_1]=true;
		break;

	case ALLEGRO_KEY_2:
		key[KEY_2]=true;
		break;

	case ALLEGRO_KEY_3:
		key[KEY_3]=true;
		break;

	case ALLEGRO_KEY_4:
		key[KEY_4]=true;
		break;

	case ALLEGRO_KEY_5:
		key[KEY_5]=true;
		break;

	case ALLEGRO_KEY_6:
		key[KEY_6]=true;
		break;

	case ALLEGRO_KEY_7:
		key[KEY_7]=true;
		break;

	case ALLEGRO_KEY_8:
		key[KEY_8]=true;
		break;

	case ALLEGRO_KEY_9:
		key[KEY_9]=true;
		break;

	case ALLEGRO_KEY_PAD_0:
		key[KEY_PAD_0]=true;
		break;

	case ALLEGRO_KEY_PAD_1:
		key[KEY_PAD_1]=true;
		break;

	case ALLEGRO_KEY_PAD_2:
		key[KEY_PAD_2]=true;
		break;

	case ALLEGRO_KEY_PAD_3:
		key[KEY_PAD_3]=true;
		break;

	case ALLEGRO_KEY_PAD_4:
		key[KEY_PAD_4]=true;
		break;

	case ALLEGRO_KEY_PAD_5:
		key[KEY_PAD_5]=true;
		break;

	case ALLEGRO_KEY_PAD_6:
		key[KEY_PAD_6]=true;
		break;

	case ALLEGRO_KEY_PAD_7:
		key[KEY_PAD_7]=true;
		break;

	case ALLEGRO_KEY_PAD_8:
		key[KEY_PAD_8]=true;
		break;

	case ALLEGRO_KEY_PAD_9:
		key[KEY_PAD_9]=true;
		break;

	case ALLEGRO_KEY_F1:
		key[KEY_F1]=true;
		break;

	case ALLEGRO_KEY_F2:
		key[KEY_F2]=true;
		break;

	case ALLEGRO_KEY_F3:
		key[KEY_F3]=true;
		break;

	case ALLEGRO_KEY_F4:
		key[KEY_F4]=true;
		break;

	case ALLEGRO_KEY_F5:
		key[KEY_F5]=true;
		break;

	case ALLEGRO_KEY_F6:
		key[KEY_F6]=true;
		break;

	case ALLEGRO_KEY_F7:
		key[KEY_F7]=true;
		break;

	case ALLEGRO_KEY_F8:
		key[KEY_F8]=true;
		break;

	case ALLEGRO_KEY_F9:
		key[KEY_F9]=true;
		break;

	case ALLEGRO_KEY_F10:
		key[KEY_F10]=true;
		break;

	case ALLEGRO_KEY_F11:
		key[KEY_F11]=true;
		break;

	case ALLEGRO_KEY_F12:
		key[KEY_F12]=true;
		break;

	case ALLEGRO_KEY_ESCAPE:
		key[KEY_ESCAPE]=true;
		break;

	case ALLEGRO_KEY_TILDE:
		key[KEY_TILDE]=true;
		break;

	case ALLEGRO_KEY_MINUS:
		key[KEY_MINUS]=true;
		break;

	case ALLEGRO_KEY_EQUALS:
		key[KEY_EQUALS]=true;
		break;

	case ALLEGRO_KEY_BACKSPACE:
		key[KEY_BACKSPACE]=true;
		break;

	case ALLEGRO_KEY_TAB:
		key[KEY_TAB]=true;
		break;

	case ALLEGRO_KEY_OPENBRACE:
		key[KEY_OPENBRACE]=true;
		break;

	case ALLEGRO_KEY_CLOSEBRACE:
		key[KEY_CLOSEBRACE]=true;
		break;

	case ALLEGRO_KEY_ENTER:
		key[KEY_ENTER]=true;
		break;

	case ALLEGRO_KEY_SEMICOLON:
		key[KEY_SEMICOLON]=true;
		break;

	case ALLEGRO_KEY_QUOTE:
		key[KEY_QUOTE]=true;
		break;

	case ALLEGRO_KEY_BACKSLASH:
		key[KEY_BACKSLASH]=true;
		break;

	case ALLEGRO_KEY_BACKSLASH2:
		key[KEY_BACKSLASH2]=true;
		break;

	case ALLEGRO_KEY_COMMA:
		key[KEY_COMMA]=true;
		break;

	case ALLEGRO_KEY_FULLSTOP:
		key[KEY_FULLSTOP]=true;
		break;

	case ALLEGRO_KEY_SLASH:
		key[KEY_SLASH]=true;
		break;

	case ALLEGRO_KEY_SPACE:
		key[KEY_SPACE]=true;
		break;

	case ALLEGRO_KEY_INSERT:
		key[KEY_INSERT]=true;
		break;

	case ALLEGRO_KEY_DELETE:
		key[KEY_DELETE]=true;
		break;

	case ALLEGRO_KEY_HOME:
		key[KEY_HOME]=true;
		break;

	case ALLEGRO_KEY_END:
		key[KEY_END]=true;
		break;

	case ALLEGRO_KEY_PGUP:
		key[KEY_PGUP]=true;
		break;

	case ALLEGRO_KEY_PGDN:
		key[KEY_PGDN]=true;
		break;

	case ALLEGRO_KEY_LEFT:
		key[KEY_LEFT]=true;
		break;

	case ALLEGRO_KEY_RIGHT:
		key[KEY_RIGHT]=true;
		break;

	case ALLEGRO_KEY_UP:
		key[KEY_UP]=true;
		break;

	case ALLEGRO_KEY_DOWN:
		key[KEY_DOWN]=true;
		break;

	case ALLEGRO_KEY_PAD_SLASH:
		key[KEY_PAD_SLASH]=true;
		break;

	case ALLEGRO_KEY_PAD_ASTERISK:
		key[KEY_PAD_ASTERISK]=true;
		break;

	case ALLEGRO_KEY_PAD_MINUS:
		key[KEY_PAD_MINUS]=true;
		break;

	case ALLEGRO_KEY_PAD_PLUS:
		key[KEY_PAD_PLUS]=true;
		break;

	case ALLEGRO_KEY_PAD_DELETE:
		key[KEY_PAD_DELETE]=true;
		break;

	case ALLEGRO_KEY_PAD_ENTER:
		key[KEY_PAD_ENTER]=true;
		break;

	case ALLEGRO_KEY_PRINTSCREEN:
		key[KEY_PRINTSCREEN]=true;
		break;

	case ALLEGRO_KEY_PAUSE:
		key[KEY_PAUSE]=true;
		break;

	case ALLEGRO_KEY_ABNT_C1:
		key[KEY_ABNT_C1]=true;
		break;

	case ALLEGRO_KEY_YEN:
		key[KEY_YEN]=true;
		break;

	case ALLEGRO_KEY_KANA:
		key[KEY_KANA]=true;
		break;

	case ALLEGRO_KEY_CONVERT:
		key[KEY_CONVERT]=true;
		break;

	case ALLEGRO_KEY_NOCONVERT:
		key[KEY_NOCONVERT]=true;
		break;

	case ALLEGRO_KEY_AT:
		key[KEY_AT]=true;
		break;

	case ALLEGRO_KEY_CIRCUMFLEX:
		key[KEY_CIRCUMFLEX]=true;
		break;

	case ALLEGRO_KEY_COLON2:
		key[KEY_COLON2]=true;
		break;

	case ALLEGRO_KEY_KANJI:
		key[KEY_KANJI]=true;
		break;

	case ALLEGRO_KEY_LSHIFT:
		key[KEY_LSHIFT]=true;
		break;

	case ALLEGRO_KEY_RSHIFT:
		key[KEY_RSHIFT]=true;
		break;

	case ALLEGRO_KEY_LCTRL:
		key[KEY_LCTRL]=true;
		break;

	case ALLEGRO_KEY_RCTRL:
		key[KEY_RCTRL]=true;
		break;

	case ALLEGRO_KEY_ALT:
		key[KEY_ALT]=true;
		break;

	case ALLEGRO_KEY_ALTGR:
		key[KEY_ALTGR]=true;
		break;

	case ALLEGRO_KEY_LWIN:
		key[KEY_LWIN]=true;
		break;

	case ALLEGRO_KEY_RWIN:
		key[KEY_RWIN]=true;
		break;

	case ALLEGRO_KEY_MENU:
		key[KEY_MENU]=true;
		break;

	case ALLEGRO_KEY_SCROLLLOCK:
		key[KEY_SCROLLLOCK]=true;
		break;

	case ALLEGRO_KEY_NUMLOCK:
		key[KEY_NUMLOCK]=true;
		break;

	case ALLEGRO_KEY_CAPSLOCK:
		key[KEY_CAPSLOCK]=true;
		break;

	case ALLEGRO_KEY_PAD_EQUALS:
		key[KEY_PAD_EQUALS]=true;
		break;

	case ALLEGRO_KEY_BACKQUOTE:
		key[KEY_BACKQUOTE]=true;
		break;

	case ALLEGRO_KEY_SEMICOLON2:
		key[KEY_SEMICOLON2]=true;
		break;

	case ALLEGRO_KEY_COMMAND:
		key[KEY_COMMAND]=true;
		break;
	}
	ev_key_down(ev.keyboard.keycode);
}
else if(ev.type == ALLEGRO_EVENT_KEY_UP) {
	switch(ev.keyboard.keycode) {
	case ALLEGRO_KEY_A:
		key[KEY_A]=false;
		break;

	case ALLEGRO_KEY_B:
		key[KEY_B]=false;
		break;

	case ALLEGRO_KEY_C:
		key[KEY_C]=false;
		break;

	case ALLEGRO_KEY_D:
		key[KEY_D]=false;
		break;

	case ALLEGRO_KEY_E:
		key[KEY_E]=false;
		break;

	case ALLEGRO_KEY_F:
		key[KEY_F]=false;
		break;

	case ALLEGRO_KEY_G:
		key[KEY_G]=false;
		break;

	case ALLEGRO_KEY_H:
		key[KEY_H]=false;
		break;

	case ALLEGRO_KEY_I:
		key[KEY_I]=false;
		break;

	case ALLEGRO_KEY_J:
		key[KEY_J]=false;
		break;

	case ALLEGRO_KEY_K:
		key[KEY_K]=false;
		break;

	case ALLEGRO_KEY_L:
		key[KEY_L]=false;
		break;

	case ALLEGRO_KEY_M:
		key[KEY_M]=false;
		break;

	case ALLEGRO_KEY_N:
		key[KEY_N]=false;
		break;

	case ALLEGRO_KEY_O:
		key[KEY_O]=false;
		break;

	case ALLEGRO_KEY_P:
		key[KEY_P]=false;
		break;

	case ALLEGRO_KEY_Q:
		key[KEY_Q]=false;
		break;

	case ALLEGRO_KEY_R:
		key[KEY_R]=false;
		break;

	case ALLEGRO_KEY_S:
		key[KEY_S]=false;
		break;

	case ALLEGRO_KEY_T:
		key[KEY_T]=false;
		break;

	case ALLEGRO_KEY_U:
		key[KEY_U]=false;
		break;

	case ALLEGRO_KEY_V:
		key[KEY_V]=false;
		break;

	case ALLEGRO_KEY_W:
		key[KEY_W]=false;
		break;

	case ALLEGRO_KEY_X:
		key[KEY_X]=false;
		break;

	case ALLEGRO_KEY_Y:
		key[KEY_Y]=false;
		break;

	case ALLEGRO_KEY_Z:
		key[KEY_Z]=false;
		break;

	case ALLEGRO_KEY_0:
		key[KEY_0]=false;
		break;

	case ALLEGRO_KEY_1:
		key[KEY_1]=false;
		break;

	case ALLEGRO_KEY_2:
		key[KEY_2]=false;
		break;

	case ALLEGRO_KEY_3:
		key[KEY_3]=false;
		break;

	case ALLEGRO_KEY_4:
		key[KEY_4]=false;
		break;

	case ALLEGRO_KEY_5:
		key[KEY_5]=false;
		break;

	case ALLEGRO_KEY_6:
		key[KEY_6]=false;
		break;

	case ALLEGRO_KEY_7:
		key[KEY_7]=false;
		break;

	case ALLEGRO_KEY_8:
		key[KEY_8]=false;
		break;

	case ALLEGRO_KEY_9:
		key[KEY_9]=false;
		break;

	case ALLEGRO_KEY_PAD_0:
		key[KEY_PAD_0]=false;
		break;

	case ALLEGRO_KEY_PAD_1:
		key[KEY_PAD_1]=false;
		break;

	case ALLEGRO_KEY_PAD_2:
		key[KEY_PAD_2]=false;
		break;

	case ALLEGRO_KEY_PAD_3:
		key[KEY_PAD_3]=false;
		break;

	case ALLEGRO_KEY_PAD_4:
		key[KEY_PAD_4]=false;
		break;

	case ALLEGRO_KEY_PAD_5:
		key[KEY_PAD_5]=false;
		break;

	case ALLEGRO_KEY_PAD_6:
		key[KEY_PAD_6]=false;
		break;

	case ALLEGRO_KEY_PAD_7:
		key[KEY_PAD_7]=false;
		break;

	case ALLEGRO_KEY_PAD_8:
		key[KEY_PAD_8]=false;
		break;

	case ALLEGRO_KEY_PAD_9:
		key[KEY_PAD_9]=false;
		break;

	case ALLEGRO_KEY_F1:
		key[KEY_F1]=false;
		break;

	case ALLEGRO_KEY_F2:
		key[KEY_F2]=false;
		break;

	case ALLEGRO_KEY_F3:
		key[KEY_F3]=false;
		break;

	case ALLEGRO_KEY_F4:
		key[KEY_F4]=false;
		break;

	case ALLEGRO_KEY_F5:
		key[KEY_F5]=false;
		break;

	case ALLEGRO_KEY_F6:
		key[KEY_F6]=false;
		break;

	case ALLEGRO_KEY_F7:
		key[KEY_F7]=false;
		break;

	case ALLEGRO_KEY_F8:
		key[KEY_F8]=false;
		break;

	case ALLEGRO_KEY_F9:
		key[KEY_F9]=false;
		break;

	case ALLEGRO_KEY_F10:
		key[KEY_F10]=false;
		break;

	case ALLEGRO_KEY_F11:
		key[KEY_F11]=false;
		break;

	case ALLEGRO_KEY_F12:
		key[KEY_F12]=false;
		break;

	case ALLEGRO_KEY_ESCAPE:
		key[KEY_ESCAPE]=false;
		break;

	case ALLEGRO_KEY_TILDE:
		key[KEY_TILDE]=false;
		break;

	case ALLEGRO_KEY_MINUS:
		key[KEY_MINUS]=false;
		break;

	case ALLEGRO_KEY_EQUALS:
		key[KEY_EQUALS]=false;
		break;

	case ALLEGRO_KEY_BACKSPACE:
		key[KEY_BACKSPACE]=false;
		break;

	case ALLEGRO_KEY_TAB:
		key[KEY_TAB]=false;
		break;

	case ALLEGRO_KEY_OPENBRACE:
		key[KEY_OPENBRACE]=false;
		break;

	case ALLEGRO_KEY_CLOSEBRACE:
		key[KEY_CLOSEBRACE]=false;
		break;

	case ALLEGRO_KEY_ENTER:
		key[KEY_ENTER]=false;
		break;

	case ALLEGRO_KEY_SEMICOLON:
		key[KEY_SEMICOLON]=false;
		break;

	case ALLEGRO_KEY_QUOTE:
		key[KEY_QUOTE]=false;
		break;

	case ALLEGRO_KEY_BACKSLASH:
		key[KEY_BACKSLASH]=false;
		break;

	case ALLEGRO_KEY_BACKSLASH2:
		key[KEY_BACKSLASH2]=false;
		break;

	case ALLEGRO_KEY_COMMA:
		key[KEY_COMMA]=false;
		break;

	case ALLEGRO_KEY_FULLSTOP:
		key[KEY_FULLSTOP]=false;
		break;

	case ALLEGRO_KEY_SLASH:
		key[KEY_SLASH]=false;
		break;

	case ALLEGRO_KEY_SPACE:
		key[KEY_SPACE]=false;
		break;

	case ALLEGRO_KEY_INSERT:
		key[KEY_INSERT]=false;
		break;

	case ALLEGRO_KEY_DELETE:
		key[KEY_DELETE]=false;
		break;

	case ALLEGRO_KEY_HOME:
		key[KEY_HOME]=false;
		break;

	case ALLEGRO_KEY_END:
		key[KEY_END]=false;
		break;

	case ALLEGRO_KEY_PGUP:
		key[KEY_PGUP]=false;
		break;

	case ALLEGRO_KEY_PGDN:
		key[KEY_PGDN]=false;
		break;

	case ALLEGRO_KEY_LEFT:
		key[KEY_LEFT]=false;
		break;

	case ALLEGRO_KEY_RIGHT:
		key[KEY_RIGHT]=false;
		break;

	case ALLEGRO_KEY_UP:
		key[KEY_UP]=false;
		break;

	case ALLEGRO_KEY_DOWN:
		key[KEY_DOWN]=false;
		break;

	case ALLEGRO_KEY_PAD_SLASH:
		key[KEY_PAD_SLASH]=false;
		break;

	case ALLEGRO_KEY_PAD_ASTERISK:
		key[KEY_PAD_ASTERISK]=false;
		break;

	case ALLEGRO_KEY_PAD_MINUS:
		key[KEY_PAD_MINUS]=false;
		break;

	case ALLEGRO_KEY_PAD_PLUS:
		key[KEY_PAD_PLUS]=false;
		break;

	case ALLEGRO_KEY_PAD_DELETE:
		key[KEY_PAD_DELETE]=false;
		break;

	case ALLEGRO_KEY_PAD_ENTER:
		key[KEY_PAD_ENTER]=false;
		break;

	case ALLEGRO_KEY_PRINTSCREEN:
		key[KEY_PRINTSCREEN]=false;
		break;

	case ALLEGRO_KEY_PAUSE:
		key[KEY_PAUSE]=false;
		break;

	case ALLEGRO_KEY_ABNT_C1:
		key[KEY_ABNT_C1]=false;
		break;

	case ALLEGRO_KEY_YEN:
		key[KEY_YEN]=false;
		break;

	case ALLEGRO_KEY_KANA:
		key[KEY_KANA]=false;
		break;

	case ALLEGRO_KEY_CONVERT:
		key[KEY_CONVERT]=false;
		break;

	case ALLEGRO_KEY_NOCONVERT:
		key[KEY_NOCONVERT]=false;
		break;

	case ALLEGRO_KEY_AT:
		key[KEY_AT]=false;
		break;

	case ALLEGRO_KEY_CIRCUMFLEX:
		key[KEY_CIRCUMFLEX]=false;
		break;

	case ALLEGRO_KEY_COLON2:
		key[KEY_COLON2]=false;
		break;

	case ALLEGRO_KEY_KANJI:
		key[KEY_KANJI]=false;
		break;

	case ALLEGRO_KEY_LSHIFT:
		key[KEY_LSHIFT]=false;
		break;

	case ALLEGRO_KEY_RSHIFT:
		key[KEY_RSHIFT]=false;
		break;

	case ALLEGRO_KEY_LCTRL:
		key[KEY_LCTRL]=false;
		break;

	case ALLEGRO_KEY_RCTRL:
		key[KEY_RCTRL]=false;
		break;

	case ALLEGRO_KEY_ALT:
		key[KEY_ALT]=false;
		break;

	case ALLEGRO_KEY_ALTGR:
		key[KEY_ALTGR]=false;
		break;

	case ALLEGRO_KEY_LWIN:
		key[KEY_LWIN]=false;
		break;

	case ALLEGRO_KEY_RWIN:
		key[KEY_RWIN]=false;
		break;

	case ALLEGRO_KEY_MENU:
		key[KEY_MENU]=false;
		break;

	case ALLEGRO_KEY_SCROLLLOCK:
		key[KEY_SCROLLLOCK]=false;
		break;

	case ALLEGRO_KEY_NUMLOCK:
		key[KEY_NUMLOCK]=false;
		break;

	case ALLEGRO_KEY_CAPSLOCK:
		key[KEY_CAPSLOCK]=false;
		break;

	case ALLEGRO_KEY_PAD_EQUALS:
		key[KEY_PAD_EQUALS]=false;
		break;

	case ALLEGRO_KEY_BACKQUOTE:
		key[KEY_BACKQUOTE]=false;
		break;

	case ALLEGRO_KEY_SEMICOLON2:
		key[KEY_SEMICOLON2]=false;
		break;

	case ALLEGRO_KEY_COMMAND:
		key[KEY_COMMAND]=false;
		break;
	}
	ev_key_up(ev.keyboard.keycode);
}
